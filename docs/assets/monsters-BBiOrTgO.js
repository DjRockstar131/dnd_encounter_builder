import"./main-4kQcdMcL.js";import{g as h,m as g,s as f,a as y,b as p,c as S}from"./render-C2sAf7Np.js";const s=document.querySelector("#q"),q=document.querySelector("#crMax"),L=document.querySelector("#searchBtn"),l=document.querySelector("#grid"),M=document.querySelector("#status"),d=document.querySelector("#heroImg"),b=document.querySelector("#heroTitle"),T=document.querySelector("#heroAttribution"),o=document.querySelector("#monsterModal"),c=document.querySelector("#modalBody"),k=document.querySelector("#modalClose");L.addEventListener("click",()=>i());s.addEventListener("keydown",e=>{e.key==="Enter"&&i()});k.addEventListener("click",()=>o.close());o.addEventListener("click",e=>{e.target===o&&o.close()});l.addEventListener("click",async e=>{const n=e.target.closest("button[data-action='detail']");if(!n)return;const t=n.dataset.slug;if(t)try{c.innerHTML='<p class="muted">Loading…</p>',o.showModal();const r=await h(t);c.innerHTML=g(r)}catch(r){console.error(r),c.innerHTML='<p class="muted">Could not load monster details.</p>'}});async function i(){a("Loading monsters…"),l.innerHTML="";try{const e=await f({name:s.value.trim(),crMax:q.value}),n=s.value.trim()?`${s.value.trim()} fantasy`:"dungeon entrance fantasy";if(v(n).catch(()=>{}),!e.length){a("No monsters found. Try a different search.");return}const t=document.createDocumentFragment();e.forEach(r=>t.appendChild(y(r))),l.appendChild(t),a(`Showing ${e.length} result(s). Click "View Details" for stats.`)}catch(e){console.error(e),a("Something went wrong fetching monsters.")}}async function v(e){const t=(await p(e,{perPage:1,orientation:"landscape"})).results?.[0];if(!t)return;d.src=t.urls?.regular||t.urls?.full,d.alt=e;const{photographerName:r,photographerUrl:u,unsplashUrl:m}=S(t);b.textContent=`Theme: ${e}`,T.innerHTML=`Photo by <a href="${u}" target="_blank" rel="noopener noreferrer">${r}</a> on <a href="${m}" target="_blank" rel="noopener noreferrer">Unsplash</a>.`}function a(e){M.textContent=e}i();
